<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/">
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
    <link rel="stylesheet" href="${url('/media/exam.css')}" type="text/css" />
    <title>結果</title>
    <!-- mathjax beg -->
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$']] }, "HTML-CSS": { scale: 140} });
    </script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML">
    </script>
    <meta http-equiv="X-UA-Compatible" CONTENT="IE=EmulateIE7" />
    <!-- mathjax end -->
    <script type="text/javascript" src="${url('/media/jquery.js')}"></script>
    <script type="text/javascript">
      $(function(){
          //$('.score').css('color', 'red');  // test

          var arrow = '&#8743;'
          $('.accordion_indicator').children('span').text(arrow);

          $('.accordion_head').click(function() {
              if(arrow == '&#8743;') {
                  arrow = '&#8744;';
                  bline = $(this).find('th').css('border');
                  bmargin = '20px';
              } else {
                  arrow = '&#8743;';
                  bline = 'none';
                  bmargin = '0';
              }

              $(this).find('.accordion_indicator').children('span').text(arrow);
              $(this).next().css({
                 'border-left':   bline,
                 'border-right':  bline,
                 'border-bottom': bline,
                 'margin-bottom': bmargin
              });
              $(this).next().slideToggle();
          }).next().hide();
      
      });
      
    </script>
  </head>
  <body>
    <div id="user_id"><p><span>${u.mail_addr}</span> としてログイン中</p></div>
    <div class="navi">
      <span py:if="navi[1]" class="navi_r"><a class="navi" href="${navi[1].dispatcher}">${navi[1].label}</a></span>
    </div>
    <div class="summary">
      <div id="score"><span id="total">${score[2]}点</span><span id="frac">$(=\frac{${score[0]}}{${score[1]}})$</span></div>
      <div id="time"><span id="total">タイム：${time[0]}</span><span id="avg">(1問あたり約 ${time[1]})</span></div>
    </div>
    <div class="details">
      <div py:for="r in results" class="rb">
        <table class="accordion_head">
          <tr>
            <th class="qnum">問 ${r.i}</th>
            <td class="${r.typ_class}">${r.typ_str}</td>
            <td class="history"><span py:for="h in r.history">${h}</span></td>
            <td class="qinfo">${r.q.ad}年（${r.q.nengo} ${r.q.jy}年）問${r.q.qnum}</td>
            <td class="accordion_indicator"><span></span></td>
          </tr>
        </table>
        <div class="rbx">
          <div class="qstr">${r.q.qstr}</div>
        <table class="opts">
          <tr py:if="r.q.opt_head">
            <th class="correct"></th>
            <th class="correct"></th>
            <th py:for="c in r.q.opt_head">${c}</th>
          </tr>
          <tr py:for="o in r.q.opts">
            <td class="correct"><span py:if="o.hit">&#9711;</span></td>
            <td class="${r.typ_class}"><span py:if="o.your_ans">&#10003;</span></td>
            <td py:for="c in o.cols" class="${r.q.opt_style}">${c}</td>
          </tr>
        </table>
        <div py:if="r.q.desc" class="desc">${r.q.desc}</div>
        </div>
      </div>
    </div>
    <div class="navi">
      <span py:if="navi[1]" class="navi_r"><a class="navi" href="${navi[1].dispatcher}">${navi[1].label}</a></span>
    </div>
  </body>
</html>
