<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:py="http://genshi.edgewall.org/">
  <head>
    <meta content="text/html; charset=UTF-8" http-equiv="Content-Type" />
    <link rel="stylesheet" href="${url('/media/default.css')}" type="text/css" />    
    <title>ドリルの開始</title>
    <!-- TODO: move to hoge.js -->
    <script type="text/javascript">
      function do_post(){
        if(document.form.elements['mode'].value == 'drill')
          document.form.action = 'exam_start'
        else
          document.form.action = 'exam_print'

        document.form.submit();
        return false;
      }
    </script>
  </head>
  <body class="index">
    <div id="setting">
      <h1>設定</h1>
      <form name="form" method="post">
        <table>
          <tr><th>全問題数</th>
            <td colspan="2">${n}問</td>
          </tr>
          <tr><th>出題モード</th>
            <td><input type="radio" name="mode" value="print" />全問プリント</td>
            <td><input type="radio" name="mode" value="drill" />ドリルをやる</td>
          </tr>
          <tr><th>出題数</th>
            <td colspan="2">
              <select name="qn">
                <option value="3"  selected="" >3</option>
                <option value="5"  selected="" >5</option>
                <option value="10" selected="">10</option>
                <option value="15" selected="">15</option>
                <option value="20" selected="">20</option>
                <option value="30" selected="">30</option>
                <option value="50" selected="">50</option>
                <option value="all" selected="">全部</option>
              </select>
            </td>
          </tr>
          <tr><th>出題の順番</th>
            <td><input type="radio" name="order" value="seq" />連続</td>
            <td><input type="radio" name="order" value="random" />ランダム</td>
          </tr>
          <tr><th>出題の傾向</th>
            <td><input type="radio" name="flavor" value="ng" />間違えた問題を優先</td>
            <td><input type="radio" name="flavor" value="dontcare" />関係なし</td>
          </tr>
          <tr><th>1ページあたりの問題数</th>
            <td colspan="2">
              <select name="n_per_page">
                <option value="1"  selected="" >1</option>
                <option value="2"  selected="" >2</option>
                <option value="3"  selected="" >3</option>
                <option value="5"  selected="" >5</option>
              </select>
            </td>
          </tr>
        </table>
      </form>
    </div>

    <div id="start">
      <div>さあ、ドリルを始めましょう</div>
      <div><a href="#" onclick="do_post()">スタート</a></div>
    </div>
    
    <div py:if="hists" id="history">
    <h1>ドリル履歴</h1>
      <table>
        <tr><th>日付</th><th>出題数</th><th>得点</th></tr>
        <tr py:for="h in hists">
          <td>${h.start_time.year}/${h.start_time.month}/${h.start_time.day} ${h.start_time.hour}:${h.start_time.minute}</td>
          <td>${h.score[1]}問</td>
          <td>${h.score[2]}点</td>
        </tr>
      </table>
    </div>
    
    <div id="footer">
      <hr />
      <p class="legalese">© 2013 autometa.ro</p>
    </div>
  </body>
</html>
